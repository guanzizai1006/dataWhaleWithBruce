# MySQL 的第4课

## 项目名称： 交换工资（难度： easy）
> 创建一个 salary表，如下所示，有m=男性 和 f=女性的值 。
例如:
| id | name | sex | salary |
|----|------|-----|--------|
| 1  | A    | m   | 2500   |
| 2  | B    | f   | 1500   |
| 3  | C    | m   | 5500   |
| 4  | D    | f   | 500    |

交换所有的 f 和 m 值(例如，将所有 f 值更改为 m，反之亦然)。要求使用一个更新查询，并且没有中间临时表。

运行你所编写的查询语句之后，将会得到以下表:
| id | name | sex | salary |
|----|------|-----|--------|
| 1  | A    | f   | 2500   |
| 2  | B    | m   | 1500   |
| 3  | C    | f   | 5500   |
| 4  | D    | m   | 500    |

## 1. 创建表
## 2. 添加数据
## 3. 根据条件，分析方法
> 注意哦，附加条件是：只能写一个Update语句，请不要编写任何 Select 语句

update table  
set 字段1=case     
    when 条件1 then 值1       
    when 条件2 then 值2      
    else 值3      
    end     
where    ……


update salary  
set sex=case sex   
    when "m" then "f"       
    when "f" then "m"	# 或者是else "m"
end

--------------------- 

> 版权声明：本文为CSDN博主「submarineas」的原创文章，遵循CC 4.0 by-sa版权协议，转载请附上原文出处链接及本声明。
> 原文链接：https://blog.csdn.net/submarineas/article/details/98487338

## Bruce 的本地操作为：

# 进入数据库，密码是root
(py36_pytorch) bruce@zhengdz-PowerEdge-T310:~/Downloads/git/dataWhaleWithBruce/mysql/Task2$ mysql -u root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 25
Server version: 5.7.27-0ubuntu0.16.04.1 (Ubuntu)

Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

# 显示列表，失败
mysql> show tables;
ERROR 1046 (3D000): No database selected

# 显示数据库
mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| TASK1              |
| mysql              |
| performance_schema |
| sys                |
| world_demo         |
+--------------------+
6 rows in set (0.00 sec)

# 选择数据库
mysql> use TASK1
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed

# 显示列表
mysql> show tables;
+-----------------+
| Tables_in_TASK1 |
+-----------------+
| Person          |
| courses         |
+-----------------+
2 rows in set (0.00 sec)


# 创建列表
mysql> create table salary(
    -> id int not null,
    -> name varchar(100) not null,
    -> sex varchar(100) not null,
    -> salary int not null);
Query OK, 0 rows affected (0.31 sec)

# 添加数据，并中止
mysql> insert into salary values(
    -> 1 'A' 'm' 2500),
    -> (2 , 'B‘; 
;'
^C
mysql> select * from salary;
Empty set (0.00 sec)


# 添加数据
mysql> insert into salary values(
    -> 1, 'A', 'm', 2500);
Query OK, 1 row affected (0.04 sec)


# 显示列表
mysql> select * from salary;
+----+------+-----+--------+
| id | name | sex | salary |
+----+------+-----+--------+
|  1 | A    | m   |   2500 |
+----+------+-----+--------+
1 row in set (0.00 sec)

# 插入数据
mysql> insert into salary values( 2, 'B', 'f', 1500);
Query OK, 1 row affected (0.03 sec)

mysql> insert into salary values(3, 'C', 'm', 5500);
Query OK, 1 row affected (0.03 sec)

mysql> insert into salary values( 4, 'D', 'f', 500);
Query OK, 1 row affected (0.04 sec)

# 显示列表
mysql> select * from salary;
+----+------+-----+--------+
| id | name | sex | salary |
+----+------+-----+--------+
|  1 | A    | m   |   2500 |
|  2 | B    | f   |   1500 |
|  3 | C    | m   |   5500 |
|  4 | D    | f   |    500 |
+----+------+-----+--------+
4 rows in set (0.00 sec)


# update 操作
mysql> update salary
    -> set sex = case sex
    ->     when "m" then "f"
    ->     when "f" then "m"
    -> end
    -> ;
Query OK, 4 rows affected (0.11 sec)
Rows matched: 4  Changed: 4  Warnings: 0

# 显示更改后的列表
mysql> select * from salary;
+----+------+-----+--------+
| id | name | sex | salary |
+----+------+-----+--------+
|  1 | A    | f   |   2500 |
|  2 | B    | m   |   1500 |
|  3 | C    | f   |   5500 |
|  4 | D    | m   |    500 |
+----+------+-----+--------+
4 rows in set (0.00 sec)

# 退出mysql
mysql> exit;
Bye


# 总结： update操作，。。
